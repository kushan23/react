{"ast":null,"code":"import _defineProperty from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Container,Col,Form,FormGroup,Label,Input,CardGroup,Button,FormText}from'reactstrap';import{Card,CardTitle,CardText,CardSubtitle,CardBody}from'reactstrap';import'../styles/login.css';import'../styles/show.css';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',password:'',loggedIn:'',posts:[],auth:[],user:'',maybe:'',edit:''};_this.componentDidMount=function(){_this.getData();var log=localStorage.getItem('user');if(log){_this.setState({loggedIn:true});}};_this.handleLogout=function(){_this.setState({user:\"\",loggedIn:false});localStorage.clear();console.log(\"Bye bye\");};_this.Editpost=function(data){console.log(\"helllo\");var id=data._id;console.log(\"id is->\"+id);localStorage.setItem('id',id);_this.setState({edit:\"yes\"});};_this.DeletePost=function(data){var uId=data._id;var payload={id:uId};console.log(payload);axios.delete('http://localhost:4000/app/posts/delete',{data:payload}).then(function(Response){return console.log(\"DONE?\");}).catch(function(error){console.log(error);});_this.setState({posts:_this.state.posts.filter(function(el){return el._id!=uId;})});};_this.getData=function(){var usern=localStorage.getItem('user');var payload={username:usern};axios.post('http://localhost:4000/app/posts',payload).then(function(Response){var data=Response.data;_this.setState({posts:data});}).catch(function(){alert(\"Server Error\");});};_this.displayData=function(posts){return posts.map(function(posts,index){return/*#__PURE__*/_jsx(\"div\",{className:\"container col-6 mt-5\",children:/*#__PURE__*/_jsx(Card,{className:\"bg-dark text-white\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(CardTitle,{tag:\"h5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show\",children:posts.title})}),/*#__PURE__*/_jsx(CardSubtitle,{tag:\"h6\",className:\"mb-2 text-muted\",children:posts.description}),/*#__PURE__*/_jsx(CardText,{children:posts.body}),/*#__PURE__*/_jsx(Button,{outline:true,color:\"warning\",onClick:function onClick(){return _this.Editpost(posts);},children:\"Edit Post\"}),/*#__PURE__*/_jsx(Button,{outline:true,color:\"danger\",onClick:function onClick(){return _this.DeletePost(posts);},children:\"Delete\"})]})})});});};_this.handleChange=function(event){var target=event.target;var name=target.name;var value=target.value;_this.setState(_defineProperty({},name,value));};_this.submitForm=function(event){event.preventDefault();var payload={username:_this.state.username,password:_this.state.password};axios.post('http://localhost:4000/app/login',payload).then(function(Response){if(Response.data==='Wrong'){_this.setState({maybe:\"Incorrect, please try again\"});}else{_this.setState({posts:Response.data});_this.setState({loggedIn:true});_this.setState({user:_this.state.username});localStorage.setItem('user',_this.state.username);_this.setState({username:'',password:'',loggedIn:true});}});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){if(this.state.edit===\"yes\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/edit\"});}if(this.state.loggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog\",children:[/*#__PURE__*/_jsx(CardGroup,{children:this.displayData(this.state.posts)}),/*#__PURE__*/_jsx(\"div\",{className:\"logout\",children:/*#__PURE__*/_jsx(Button,{\"outline-primary\":true,onClick:this.handleLogout,children:\"Logout\"})})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"log\",children:/*#__PURE__*/_jsx(Container,{className:\"App \",children:/*#__PURE__*/_jsxs(Form,{className:\"form\",onSubmit:this.submitForm,children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"User\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Username\",name:\"username\",onChange:this.handleChange,value:this.state.username})]})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"examplePassword\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",id:\"examplePassword\",onChange:this.handleChange,value:this.state.password,placeholder:\"********\"})]}),/*#__PURE__*/_jsx(FormText,{children:/*#__PURE__*/_jsx(\"b\",{children:this.state.maybe})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsx(Button,{children:\"Submit\"})})]})})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/Users/kushan/Desktop/react_blog/signupbackend/client/src/components/auth/Login.jsx"],"names":["React","Component","axios","Container","Col","Form","FormGroup","Label","Input","CardGroup","Button","FormText","Card","CardTitle","CardText","CardSubtitle","CardBody","Redirect","Login","state","username","password","loggedIn","posts","auth","user","maybe","edit","componentDidMount","getData","log","localStorage","getItem","setState","handleLogout","clear","console","Editpost","data","id","_id","setItem","DeletePost","uId","payload","delete","then","Response","catch","error","filter","el","usern","post","alert","displayData","map","index","title","description","body","handleChange","event","target","name","value","submitForm","preventDefault"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport {\n    Container, Col, Form,\n    FormGroup, Label, Input, CardGroup,\n    Button,\n    FormText,\n} from 'reactstrap';\nimport {\n    Card, CardTitle, CardText,\n    CardSubtitle, CardBody\n} from 'reactstrap';\nimport '../styles/login.css'\nimport '../styles/show.css'\nimport { Redirect } from 'react-router-dom';\n\nexport default class Login extends Component {\n    state = {\n        username: '',\n        password: '',\n        loggedIn: '',\n        posts: [],\n        auth: [],\n        user: '',\n        maybe: '',\n        edit: ''\n    };\n    componentDidMount = () => {\n        this.getData()\n\n        const log = localStorage.getItem('user');\n\n        if (log) {\n            this.setState({ loggedIn: true })\n\n        }\n\n    }\n    handleLogout = () => {\n        this.setState({\n            user: \"\",\n            loggedIn: false\n        })\n        localStorage.clear()\n        console.log(\"Bye bye\")\n    }\n    Editpost = (data) => {\n\n        console.log(\"helllo\");\n        let id = data._id\n        console.log(\"id is->\" + id);\n        localStorage.setItem('id', id)\n        this.setState({\n            edit: \"yes\"\n\n        })\n\n\n    }\n    DeletePost = (data) => {\n        let uId = data._id\n        const payload = {\n            id: uId\n\n        };\n        console.log(payload)\n\n\n        axios.delete('http://localhost:4000/app/posts/delete', { data: payload })\n            .then(Response => console.log(\"DONE?\"))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            posts: this.state.posts.filter(el => el._id != uId)\n        })\n    }\n\n    getData = () => {\n        const usern = localStorage.getItem('user')\n        const payload = {\n            username: usern\n        }\n\n        axios.post('http://localhost:4000/app/posts', payload)\n            .then((Response) => {\n                const data = Response.data\n                this.setState({ posts: data });\n            })\n            .catch(() => {\n                alert(\"Server Error\");\n            })\n    }\n    displayData = (posts) => {\n        return posts.map((posts, index) => (\n            <div className=\"container col-6 mt-5\">\n\n                <Card className=\"bg-dark text-white\">\n\n                    <CardBody>\n                        <CardTitle tag=\"h5\"><span className=\"show\">{posts.title}</span></CardTitle>\n                        <CardSubtitle tag=\"h6\" className=\"mb-2 text-muted\">{posts.description}</CardSubtitle>\n                        <CardText>{posts.body}</CardText>\n                        <Button outline color=\"warning\" onClick={() => this.Editpost(posts)}>Edit Post</Button>\n                        <Button outline color=\"danger\" onClick={() => this.DeletePost(posts)}>Delete</Button>\n                    </CardBody>\n                </Card>\n\n            </div>\n\n\n        ));\n\n    };\n    handleChange = (event) => {\n        const target = event.target;\n        const name = target.name;\n        const value = target.value;\n        this.setState({\n            [name]: value\n        });\n    };\n    submitForm = (event) => {\n        event.preventDefault()\n        const payload = {\n            username: this.state.username,\n            password: this.state.password\n        };\n\n        axios.post('http://localhost:4000/app/login', payload)\n            .then((Response) => {\n                if (Response.data === 'Wrong') {\n                    this.setState({ maybe: \"Incorrect, please try again\" })\n\n\n\n                }\n                else {\n                    this.setState({\n                        posts: Response.data\n\n                    })\n                    this.setState({ loggedIn: true })\n                    this.setState({ user: this.state.username })\n                    localStorage.setItem('user', this.state.username)\n                    this.setState({\n                        username: '',\n                        password: '',\n                        loggedIn: true\n\n                    })\n                }\n            })\n    };\n    render() {\n        if (this.state.edit === \"yes\") {\n            return (\n                <Redirect to='/edit'></Redirect>\n            )\n        }\n        if (this.state.loggedIn) {\n            return (\n                <div className=\"container mt-5 col-6\">\n                    <div className=\"blog\">\n                        <CardGroup>\n                            {this.displayData(this.state.posts)}\n                        </CardGroup>\n                        <div className=\"logout\">\n                            <Button outline-primary onClick={this.handleLogout}>Logout</Button>\n                        </div>\n                    </div>\n                </div>\n            )\n\n        }\n        return (\n            <div className=\"log\">\n                <Container className=\"App \">\n                    <Form className=\"form\" onSubmit={this.submitForm} >\n                        <Col>\n                            <FormGroup>\n                                <Label>User</Label>\n                                <Input\n                                    type='text'\n                                    placeholder='Username'\n                                    name=\"username\"\n                                    onChange={this.handleChange}\n                                    value={this.state.username}\n                                />\n                            </FormGroup>\n                        </Col>\n                        <Col>\n                            <FormGroup>\n                                <Label for=\"examplePassword\">Password</Label>\n                                <Input\n                                    type=\"password\"\n                                    name=\"password\"\n                                    id=\"examplePassword\"\n                                    onChange={this.handleChange}\n                                    value={this.state.password}\n                                    placeholder=\"********\"\n                                />\n                            </FormGroup>\n                            <FormText><b>{this.state.maybe}</b></FormText>\n                        </Col>\n                        <div className='container mt-3'>\n                            <Button>Submit</Button>\n                        </div>\n                    </Form>\n                </Container>\n            </div>\n\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}