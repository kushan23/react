{"ast":null,"code":"import _classCallCheck from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kushan/Desktop/react_blog/signupbackend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import EditPost from'./edit';import{Redirect,Route}from'react-router-dom';import{Card,Button,CardImg,CardTitle,CardText,CardGroup,CardSubtitle,CardBody}from'reactstrap';import'../styles/show.css';import{Link,useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostShow=/*#__PURE__*/function(_Component){_inherits(PostShow,_Component);var _super=_createSuper(PostShow);function PostShow(props){var _this;_classCallCheck(this,PostShow);_this=_super.call(this,props);_this.state={fullName:'',username:'',email:'',password:'',posts:[],user:'',loggedIn:'',edit:''};_this.componentDidMount=function(){_this.getData();var log=localStorage.getItem('user');if(log){_this.setState({user:log,loggedIn:true});}console.log(_this.state.loggedIn);console.log(_this.state.posts);};_this.getData=function(){var usern=localStorage.getItem('user');var payload={username:usern};axios.post('http://localhost:4000/app/posts',payload).then(function(Response){var data=Response.data;_this.setState({posts:data});console.log(\"Data has been recieved\");}).catch(function(){alert(\"No data sent\");});};_this.displayData=function(posts){if(!posts.length)return null;return posts.map(function(posts,index){return/*#__PURE__*/_jsx(\"div\",{className:\"container col-6 mt-5\",children:/*#__PURE__*/_jsx(Card,{className:\"bg-dark text-white\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(CardTitle,{tag:\"h5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show\",children:posts.title})}),/*#__PURE__*/_jsx(CardSubtitle,{tag:\"h6\",className:\"mb-2 text-muted\",children:posts.description}),/*#__PURE__*/_jsx(CardText,{children:posts.body}),/*#__PURE__*/_jsx(Button,{outline:true,color:\"warning\",onClick:function onClick(){return _this.Editpost(posts);},children:\"Edit Post\"}),/*#__PURE__*/_jsx(Button,{outline:true,color:\"danger\",onClick:function onClick(){return _this.DeletePost(posts);},children:\"Delete\"})]})})});});};_this.Editpost=function(data){// console.log(this.posts.title)\nconsole.log(\"helllo\");var id=data._id;console.log(\"id is->\"+id);localStorage.setItem('id',id);_this.setState({edit:\"yes\"});//console.log(data)\nconsole.log(_this.state.edit);};_this.DeletePost=function(data){// console.log(this.posts.title)\nconsole.log(\"deleting LETSGOO\");var uId=data._id;var payload={id:uId};console.log(payload);axios.delete('http://localhost:4000/app/posts/delete',{data:payload}).then(function(Response){return console.log(\"DONE?\");}).catch(function(error){console.log(error);});_this.setState({posts:_this.state.posts.filter(function(el){return el._id!=uId;})});//window.location.href = '/show';\n};_this.handleLogout=function(){_this.setState({user:\"\",loggedIn:false});localStorage.clear();console.log(\"Bye bye\");};return _this;}_createClass(PostShow,[{key:\"render\",value:function render(){if(!this.state.loggedIn){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 col-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"oops\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Please login to view all your Posts\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"link\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Login\"})})})]});}if(this.state.edit===\"yes\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/edit\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog\",children:[/*#__PURE__*/_jsx(CardGroup,{children:this.displayData(this.state.posts)}),/*#__PURE__*/_jsx(\"div\",{className:\"logout\",children:/*#__PURE__*/_jsx(Button,{\"outline-primary\":true,onClick:this.handleLogout,children:\"Logout\"})})]})});}}]);return PostShow;}(Component);export default PostShow;","map":{"version":3,"sources":["/Users/kushan/Desktop/react_blog/signupbackend/client/src/components/posts/show.js"],"names":["React","Component","axios","EditPost","Redirect","Route","Card","Button","CardImg","CardTitle","CardText","CardGroup","CardSubtitle","CardBody","Link","useParams","PostShow","props","state","fullName","username","email","password","posts","user","loggedIn","edit","componentDidMount","getData","log","localStorage","getItem","setState","console","usern","payload","post","then","Response","data","catch","alert","displayData","length","map","index","title","description","body","Editpost","DeletePost","id","_id","setItem","uId","delete","error","filter","el","handleLogout","clear"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport EditPost from './edit'\nimport { Redirect, Route } from 'react-router-dom';\nimport {\n    Card, Button, CardImg, CardTitle, CardText, CardGroup,\n    CardSubtitle, CardBody\n} from 'reactstrap';\nimport '../styles/show.css'\nimport { Link, useParams } from 'react-router-dom'\n\n\nclass PostShow extends Component {\n    constructor(props) {\n        super(props);\n    }\n    state = {\n        fullName: '',\n        username: '',\n        email: '',\n        password: '',\n        posts: [],\n        user: '',\n        loggedIn: '',\n        edit: ''\n    };\n\n    componentDidMount = () => {\n        this.getData()\n        const log = localStorage.getItem('user');\n        if (log) {\n            this.setState({\n                user: log,\n                loggedIn: true\n            })\n        }\n        console.log(this.state.loggedIn)\n        console.log(this.state.posts)\n\n    }\n    getData = () => {\n        const usern = localStorage.getItem('user')\n        const payload = {\n            username: usern\n        }\n\n        axios.post('http://localhost:4000/app/posts', payload)\n            .then((Response) => {\n                const data = Response.data\n                this.setState({ posts: data });\n\n\n                console.log(\"Data has been recieved\");\n\n            })\n            .catch(() => {\n                alert(\"No data sent\");\n            })\n    }\n    displayData = (posts) => {\n\n        if (!posts.length) return null;\n\n        return posts.map((posts, index) => (\n            <div className=\"container col-6 mt-5\">\n\n                <Card className=\"bg-dark text-white\">\n\n                    <CardBody>\n                        <CardTitle tag=\"h5\"><span className=\"show\">{posts.title}</span></CardTitle>\n                        <CardSubtitle tag=\"h6\" className=\"mb-2 text-muted\">{posts.description}</CardSubtitle>\n                        <CardText>{posts.body}</CardText>\n                        <Button outline color=\"warning\" onClick={() => this.Editpost(posts)}>Edit Post</Button>\n                        <Button outline color=\"danger\" onClick={() => this.DeletePost(posts)}>Delete</Button>\n                    </CardBody>\n                </Card>\n\n            </div>\n\n        ));\n    };\n    Editpost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"helllo\");\n        let id = data._id\n        console.log(\"id is->\" + id);\n        localStorage.setItem('id', id)\n        this.setState({\n            edit: \"yes\"\n\n        })\n        //console.log(data)\n        console.log(this.state.edit)\n\n    }\n    DeletePost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"deleting LETSGOO\");\n\n\n        let uId = data._id\n        const payload = {\n            id: uId\n\n        };\n        console.log(payload)\n\n\n        axios.delete('http://localhost:4000/app/posts/delete', { data: payload })\n            .then(Response => console.log(\"DONE?\"))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            posts: this.state.posts.filter(el => el._id != uId)\n        })\n\n        //window.location.href = '/show';\n\n\n\n\n    }\n    handleLogout = () => {\n        this.setState({\n            user: \"\",\n            loggedIn: false\n        })\n        localStorage.clear()\n        console.log(\"Bye bye\")\n    }\n\n\n\n    render() {\n        if (!this.state.loggedIn) {\n            return (\n                <div className=\"container mt-5 col-6\">\n                    <div className=\"oops\">\n                        <h1>Please login to view all your Posts</h1>\n\n                    </div>\n                    <div className=\"link\">\n                        <button className=\"btn btn-warning\"><Link to='/signin'>Login</Link></button>\n                    </div>\n                </div>\n            )\n        }\n        if (this.state.edit === \"yes\") {\n            return (\n                <Redirect to='/edit'></Redirect>\n            )\n        }\n\n        return (\n            <div className=\"container mt-5 col-6\">\n\n\n\n\n                <div className=\"blog\">\n\n                    <CardGroup>\n                        {this.displayData(this.state.posts)}\n                    </CardGroup>\n                    <div className=\"logout\">\n                        <Button outline-primary onClick={this.handleLogout}>Logout</Button>\n                    </div>\n\n                </div>\n\n\n\n            </div>\n        )\n\n    }\n}\n\nexport default PostShow"]},"metadata":{},"sourceType":"module"}