{"ast":null,"code":"import _defineProperty from\"/Users/kushan/Desktop/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/kushan/Desktop/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kushan/Desktop/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kushan/Desktop/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kushan/Desktop/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,useParams}from'react-router-dom';import{Container,Col,Form,FormGroup,Label,Input,Button,FormText}from'reactstrap';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPost=/*#__PURE__*/function(_Component){_inherits(EditPost,_Component);var _super=_createSuper(EditPost);function EditPost(){var _this;_classCallCheck(this,EditPost);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',title:'',description:'',body:'',loggedIn:'',user:'',id:'',edit:''};_this.handleChange=function(event){var target=event.target;var name=target.name;var value=target.value;_this.setState(_defineProperty({},name,value));};_this.componentDidMount=function(){_this.getData();var log=localStorage.getItem('user');var id=localStorage.getItem('id');console.log(id);if(log){_this.setState({user:log,loggedIn:true,id:id});}};_this.getData=function(){var uId=localStorage.getItem('id');var payload={id:uId};axios.post('https://mernback23.herokuapp.com/app/posts/find',payload).then(function(Response){var data=Response.data;var _data$=data[0],title=_data$.title,body=_data$.body,description=_data$.description,username=_data$.username;_this.setState({title:title,body:body,description:description,username:username});}).catch(function(){alert(\"No data sent\");});};_this.onSubmit=function(event){event.preventDefault();var uId=localStorage.getItem('id');var payload={username:_this.state.username,title:_this.state.title,description:_this.state.description,body:_this.state.body,id:uId};console.log(payload);axios.put('https://mernback23.herokuapp.com/app/posts/edit',payload).then(function(Response){return console.log(Response.data);}).catch(function(error){console.log(error);});_this.setState({edit:\"yes\"});};return _this;}_createClass(EditPost,[{key:\"render\",value:function render(){if(this.state.edit===\"yes\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/show\"});}if(!this.state.loggedIn){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Please Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"log\",children:/*#__PURE__*/_jsxs(Form,{className:\"form\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Title\",name:\"title\",onChange:this.handleChange,value:this.state.title})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Input,{name:\"description\",placeholder:\"Short Description\",onChange:this.handleChange,value:this.state.description})]})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Body\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"body\",placeholder:\"Write your thoughts\",onChange:this.handleChange,value:this.state.body})]}),/*#__PURE__*/_jsx(FormText,{children:/*#__PURE__*/_jsx(\"b\",{children:this.state.maybe})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3 \",children:/*#__PURE__*/_jsx(Button,{outline:true,color:\"danger\",children:\"Edit\"})})]})});}}]);return EditPost;}(Component);export default EditPost;","map":{"version":3,"sources":["/Users/kushan/Desktop/client2/src/components/posts/edit.js"],"names":["React","Component","axios","Link","useParams","Container","Col","Form","FormGroup","Label","Input","Button","FormText","Redirect","EditPost","state","username","title","description","body","loggedIn","user","id","edit","handleChange","event","target","name","value","setState","componentDidMount","getData","log","localStorage","getItem","console","uId","payload","post","then","Response","data","catch","alert","onSubmit","preventDefault","put","error","maybe"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, useParams } from 'react-router-dom'\nimport {\n    Container, Col, Form,\n    FormGroup, Label, Input,\n    Button,\n    FormText,\n} from 'reactstrap';\nimport { Redirect } from 'react-router-dom';\nclass EditPost extends Component {\n    state = {\n        username: '',\n        title: '',\n        description: '',\n        body: '',\n        loggedIn: '',\n        user: '',\n        id: '',\n        edit: ''\n\n    };\n    handleChange = (event) => {\n        const target = event.target;\n        const name = target.name;\n        const value = target.value;\n        this.setState({\n            [name]: value\n        });\n    };\n    componentDidMount = () => {\n\n        this.getData()\n        const log = localStorage.getItem('user')\n        let id = localStorage.getItem('id')\n\n        console.log(id)\n        if (log) {\n            this.setState({\n                user: log,\n                loggedIn: true,\n                id: id\n\n\n            })\n\n        }\n    }\n\n\n\n\n\n    getData = () => {\n        let uId = localStorage.getItem('id')\n\n        const payload = {\n            id: uId\n\n\n        }\n        axios.post('https://mernback23.herokuapp.com/app/posts/find', payload)\n            .then((Response) => {\n                const data = Response.data\n                const { title, body, description, username } = data[0];\n                this.setState({\n                    title: title,\n                    body: body,\n                    description: description,\n                    username: username\n                })\n\n\n\n            })\n            .catch(() => {\n                alert(\"No data sent\");\n            })\n\n\n\n\n    }\n    onSubmit = (event) => {\n        event.preventDefault()\n        let uId = localStorage.getItem('id');\n\n        const payload = {\n            username: this.state.username,\n            title: this.state.title,\n            description: this.state.description,\n            body: this.state.body,\n            id: uId\n\n\n\n        };\n        console.log(payload)\n        axios.put('https://mernback23.herokuapp.com/app/posts/edit', payload)\n            .then(Response => console.log(Response.data))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            edit: \"yes\"\n        })\n\n    };\n\n    render() {\n\n        if (this.state.edit === \"yes\") {\n            return (\n                <Redirect to='/show'></Redirect>\n            )\n        }\n        if (!this.state.loggedIn) {\n            return (\n                <div>\n                    <h1>Please Login</h1>\n                    <Link to='/signin'>Sign In</Link>\n                    <br />\n                    <Link to='/signup'>Sign Up</Link>\n                </div>\n            )\n        }\n\n\n        return (\n            <div className=\"log\">\n\n\n                <Form className=\"form\" onSubmit={this.onSubmit} >\n\n\n                    <Col>\n                        <FormGroup>\n                            <Label>Title</Label>\n                            <Input\n                                placeholder='Title'\n                                name=\"title\"\n                                onChange={this.handleChange}\n                                value={this.state.title}\n                            />\n\n                        </FormGroup>\n                    </Col>\n                    <Col>\n                        <FormGroup>\n                            <Label>Description</Label>\n                            <Input\n                                name=\"description\"\n                                placeholder='Short Description'\n                                onChange={this.handleChange}\n                                value={this.state.description}\n                            />\n                        </FormGroup>\n                    </Col>\n                    <Col>\n                        <FormGroup>\n                            <Label>Body</Label>\n                            <Input\n                                type=\"text\"\n                                name=\"body\"\n                                placeholder='Write your thoughts'\n                                onChange={this.handleChange}\n                                value={this.state.body}\n                            />\n                        </FormGroup>\n                        <FormText><b>{this.state.maybe}</b></FormText>\n                    </Col>\n                    <div className='container mt-3 '>\n                        <Button outline color=\"danger\">Edit</Button>\n                    </div>\n                </Form>\n\n            </div>\n\n        )\n\n    }\n}\n\n\nexport default EditPost"]},"metadata":{},"sourceType":"module"}