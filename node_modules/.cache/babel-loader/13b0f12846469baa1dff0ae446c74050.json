{"ast":null,"code":"var _jsxFileName = \"/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport EditPost from './edit';\nimport { Redirect, Route } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PostShow extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.getData();\n      const log = localStorage.getItem('user');\n\n      if (log) {\n        this.setState({\n          user: log,\n          loggedIn: true\n        });\n      }\n\n      console.log(this.state.loggedIn);\n      console.log(this.state.posts);\n    };\n\n    this.getData = () => {\n      const usern = localStorage.getItem('user');\n      const payload = {\n        username: usern\n      };\n      axios.post('http://localhost:4000/app/posts', payload).then(Response => {\n        const data = Response.data;\n        this.setState({\n          posts: data\n        });\n        console.log(\"Data has been recieved\");\n      }).catch(() => {\n        alert(\"No data sent\");\n      });\n    };\n\n    this.displayData = posts => {\n      if (!posts.length) return null;\n      return posts.map((posts, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Title: \", posts.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"username:\", posts.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"description:\", posts.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"body:\", posts.body]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.Editpost(posts),\n          children: \"Edit Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.DeletePost(posts),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this));\n    };\n\n    this.Editpost = data => {\n      // console.log(this.posts.title)\n      console.log(\"helllo\");\n      window.location.href = '/edit/' + data._id; //console.log(data)\n    };\n\n    this.DeletePost = data => {\n      // console.log(this.posts.title)\n      console.log(\"deleting LETSGOO\");\n      let uId = data._id;\n      const payload = {\n        id: uId\n      };\n      console.log(payload);\n      axios.delete('http://localhost:4000/app/posts/delete', {\n        data: payload\n      }).then(Response => console.log(\"DONE?\")).catch(error => {\n        console.log(error);\n      });\n      this.setState({\n        posts: this.state.posts.filter(el => el._id != uId)\n      });\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        user: \"\",\n        loggedIn: false\n      });\n      localStorage.clear();\n      console.log(\"Bye bye\");\n    };\n\n    this.state = {\n      fullName: '',\n      username: '',\n      email: '',\n      password: '',\n      posts: [],\n      user: '',\n      loggedIn: ''\n    };\n  }\n\n  render() {\n    if (!this.state.loggedIn) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" Login to view all your posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"Hi\", this.state.user]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"These are all my Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog-\",\n        children: this.displayData(this.state.posts)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleLogout,\n        children: \" logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PostShow;","map":{"version":3,"sources":["/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js"],"names":["React","Component","axios","EditPost","Redirect","Route","PostShow","constructor","props","componentDidMount","getData","log","localStorage","getItem","setState","user","loggedIn","console","state","posts","usern","payload","username","post","then","Response","data","catch","alert","displayData","length","map","index","title","description","body","Editpost","DeletePost","window","location","href","_id","uId","id","delete","error","filter","el","handleLogout","clear","fullName","email","password","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport EditPost from './edit'\nimport { Redirect, Route } from 'react-router-dom';\n\nclass PostShow extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            fullName: '',\n            username: '',\n            email: '',\n            password: '',\n            posts: [],\n            user: '',\n            loggedIn: ''\n        };\n\n    }\n\n\n    componentDidMount = () => {\n        this.getData()\n        const log = localStorage.getItem('user');\n        if (log) {\n            this.setState({\n                user: log,\n                loggedIn: true\n            })\n        }\n        console.log(this.state.loggedIn)\n        console.log(this.state.posts)\n\n    }\n    getData = () => {\n        const usern = localStorage.getItem('user')\n        const payload = {\n            username: usern\n        }\n\n        axios.post('http://localhost:4000/app/posts', payload)\n            .then((Response) => {\n                const data = Response.data\n                this.setState({ posts: data });\n\n\n                console.log(\"Data has been recieved\");\n\n            })\n            .catch(() => {\n                alert(\"No data sent\");\n            })\n    }\n    displayData = (posts) => {\n\n        if (!posts.length) return null;\n\n        return posts.map((posts, index) => (\n            <div key={index}>\n\n                <h3>Title: {posts.title}</h3>\n                <h3>username:{posts.username}</h3>\n                <h3>description:{posts.description}</h3>\n                <h3>body:{posts.body}</h3>\n                <button onClick={() => this.Editpost(posts)}>Edit Post</button>\n                <button onClick={() => this.DeletePost(posts)}>Delete</button>\n            </div>\n\n        ));\n    };\n    Editpost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"helllo\");\n        window.location.href = '/edit/' + data._id;\n        //console.log(data)\n\n\n    }\n    DeletePost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"deleting LETSGOO\");\n\n\n        let uId = data._id\n        const payload = {\n            id: uId\n\n        };\n        console.log(payload)\n\n\n        axios.delete('http://localhost:4000/app/posts/delete', { data: payload })\n            .then(Response => console.log(\"DONE?\"))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            posts: this.state.posts.filter(el => el._id != uId)\n        })\n\n\n\n\n\n\n    }\n    handleLogout = () => {\n        this.setState({\n            user: \"\",\n            loggedIn: false\n        })\n        localStorage.clear()\n        console.log(\"Bye bye\")\n    }\n\n\n\n    render() {\n        if (!this.state.loggedIn) {\n            return (\n                <div>\n                    <h1> Login to view all your posts</h1>\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"container\">\n                <div>\n                    <h1>Hi{this.state.user}</h1>\n                    <h1>These are all my Posts</h1>\n                </div>\n                <div className=\"blog-\">\n\n\n                    {this.displayData(this.state.posts)}\n\n\n                </div>\n                <button onClick={this.handleLogout}> logout</button>\n\n\n            </div>\n        )\n\n    }\n}\n\nexport default PostShow"]},"metadata":{},"sourceType":"module"}