{"ast":null,"code":"var _jsxFileName = \"/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport EditPost from './edit';\nimport { Redirect, Route } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PostShow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullName: '',\n      username: '',\n      email: '',\n      password: '',\n      posts: [],\n      user: '',\n      loggedIn: ''\n    };\n\n    this.componentDidMount = () => {\n      const log = localStorage.getItem('user');\n\n      if (log) {\n        this.setState({\n          user: log,\n          loggedIn: true\n        });\n      }\n\n      this.getData();\n      console.log(this.state.loggedIn);\n      console.log(this.state.posts);\n    };\n\n    this.getData = () => {\n      const usern = localStorage.getItem('user');\n      const payload = {\n        username: usern\n      };\n      axios.post('http://localhost:4000/app/posts', payload).then(Response => {\n        const data = Response.data;\n        this.setState({\n          posts: data\n        });\n        console.log(\"Data has been recieved\");\n      }).catch(() => {\n        alert(\"No data sent\");\n      });\n    };\n\n    this.displayData = posts => {\n      if (!posts.length) return null;\n      return posts.map((posts, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Title: \", posts.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"username:\", posts.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"description:\", posts.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"body:\", posts.body]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.Editpost(posts),\n          children: \"Edit Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.DeletePost(posts),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this));\n    };\n\n    this.Editpost = data => {\n      // console.log(this.posts.title)\n      console.log(\"helllo\");\n      window.location.href = '/edit/' + data._id; //console.log(data)\n    };\n\n    this.DeletePost = data => {\n      // console.log(this.posts.title)\n      console.log(\"deleting LETSGOO\");\n      let uId = data._id;\n      const payload = {\n        id: uId\n      };\n      console.log(payload);\n      axios.delete('http://localhost:4000/app/posts/delete', {\n        data: payload\n      }).then(Response => console.log(\"DONE?\")).catch(error => {\n        console.log(error);\n      });\n      this.setState({\n        posts: this.state.posts.filter(el => el._id != uId)\n      });\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        user: \"\",\n        loggedIn: false\n      });\n      localStorage.clear();\n      console.log(\"Bye bye\");\n    };\n  }\n\n  render() {\n    if (!this.state.loggedIn) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" Login to view all your posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"Hi\", this.state.user]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"These are all my Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog-\",\n        children: this.displayData(this.state.posts)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleLogout,\n        children: \" logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PostShow;","map":{"version":3,"sources":["/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js"],"names":["React","Component","axios","EditPost","Redirect","Route","PostShow","constructor","props","state","fullName","username","email","password","posts","user","loggedIn","componentDidMount","log","localStorage","getItem","setState","getData","console","usern","payload","post","then","Response","data","catch","alert","displayData","length","map","index","title","description","body","Editpost","DeletePost","window","location","href","_id","uId","id","delete","error","filter","el","handleLogout","clear","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport EditPost from './edit'\nimport { Redirect, Route } from 'react-router-dom';\n\nclass PostShow extends Component {\n    constructor(props) {\n        super(props);\n    }\n    state = {\n        fullName: '',\n        username: '',\n        email: '',\n        password: '',\n        posts: [],\n        user: '',\n        loggedIn: ''\n    };\n\n\n    componentDidMount = () => {\n        const log = localStorage.getItem('user');\n        if (log) {\n            this.setState({\n                user: log,\n                loggedIn: true\n            })\n        }\n        this.getData()\n        console.log(this.state.loggedIn)\n        console.log(this.state.posts)\n\n    }\n    getData = () => {\n        const usern = localStorage.getItem('user')\n        const payload = {\n            username: usern\n        }\n\n        axios.post('http://localhost:4000/app/posts', payload)\n            .then((Response) => {\n                const data = Response.data\n                this.setState({ posts: data });\n\n\n                console.log(\"Data has been recieved\");\n\n            })\n            .catch(() => {\n                alert(\"No data sent\");\n            })\n    }\n    displayData = (posts) => {\n\n        if (!posts.length) return null;\n\n        return posts.map((posts, index) => (\n            <div key={index}>\n\n                <h3>Title: {posts.title}</h3>\n                <h3>username:{posts.username}</h3>\n                <h3>description:{posts.description}</h3>\n                <h3>body:{posts.body}</h3>\n                <button onClick={() => this.Editpost(posts)}>Edit Post</button>\n                <button onClick={() => this.DeletePost(posts)}>Delete</button>\n            </div>\n\n        ));\n    };\n    Editpost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"helllo\");\n        window.location.href = '/edit/' + data._id;\n        //console.log(data)\n\n\n    }\n    DeletePost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"deleting LETSGOO\");\n\n\n        let uId = data._id\n        const payload = {\n            id: uId\n\n        };\n        console.log(payload)\n\n\n        axios.delete('http://localhost:4000/app/posts/delete', { data: payload })\n            .then(Response => console.log(\"DONE?\"))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            posts: this.state.posts.filter(el => el._id != uId)\n        })\n\n\n\n\n\n\n    }\n    handleLogout = () => {\n        this.setState({\n            user: \"\",\n            loggedIn: false\n        })\n        localStorage.clear()\n        console.log(\"Bye bye\")\n    }\n\n\n\n    render() {\n        if (!this.state.loggedIn) {\n            return (\n                <div>\n                    <h1> Login to view all your posts</h1>\n                </div>\n            )\n        }\n\n\n        return (\n            <div className=\"container\">\n                <div>\n                    <h1>Hi{this.state.user}</h1>\n                    <h1>These are all my Posts</h1>\n                </div>\n                <div className=\"blog-\">\n\n\n                    {this.displayData(this.state.posts)}\n\n\n                </div>\n                <button onClick={this.handleLogout}> logout</button>\n\n\n            </div>\n        )\n\n\n    }\n}\n\nexport default PostShow"]},"metadata":{},"sourceType":"module"}