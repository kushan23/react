{"ast":null,"code":"var _jsxFileName = \"/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport EditPost from './edit';\nimport { Redirect, Route } from 'react-router-dom';\nimport { Card, Button, CardImg, CardTitle, CardText, CardGroup, CardSubtitle, CardBody } from 'reactstrap';\nimport '../styles/show.css';\nimport { Link, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PostShow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullName: '',\n      username: '',\n      email: '',\n      password: '',\n      posts: [],\n      user: '',\n      loggedIn: '',\n      edit: ''\n    };\n\n    this.componentDidMount = () => {\n      this.getData();\n      const log = localStorage.getItem('user');\n\n      if (log) {\n        this.setState({\n          user: log,\n          loggedIn: true\n        });\n      }\n\n      console.log(this.state.loggedIn);\n      console.log(this.state.posts);\n    };\n\n    this.getData = () => {\n      const usern = localStorage.getItem('user');\n      const payload = {\n        username: usern\n      };\n      axios.post('http://localhost:4000/app/posts', payload).then(Response => {\n        const data = Response.data;\n        this.setState({\n          posts: data\n        });\n        console.log(\"Data has been recieved\");\n      }).catch(() => {\n        alert(\"No data sent\");\n      });\n    };\n\n    this.displayData = posts => {\n      if (!posts.length) return null;\n      return posts.map((posts, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container col-6 mt-5\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-dark text-white\",\n          children: /*#__PURE__*/_jsxDEV(CardBody, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              tag: \"h5\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"show\",\n                children: posts.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n              tag: \"h6\",\n              className: \"mb-2 text-muted\",\n              children: posts.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(CardText, {\n              children: posts.body\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              outline: true,\n              color: \"warning\",\n              onClick: () => this.Editpost(posts),\n              children: \"Edit Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              outline: true,\n              color: \"danger\",\n              onClick: () => this.DeletePost(posts),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this));\n    };\n\n    this.Editpost = data => {\n      // console.log(this.posts.title)\n      console.log(\"helllo\");\n      let id = data._id;\n      console.log(\"id is->\" + id);\n      localStorage.setItem('id', id);\n      this.setState({\n        edit: \"yes\"\n      }); //console.log(data)\n\n      console.log(this.state.edit);\n    };\n\n    this.DeletePost = data => {\n      // console.log(this.posts.title)\n      console.log(\"deleting LETSGOO\");\n      let uId = data._id;\n      const payload = {\n        id: uId\n      };\n      console.log(payload);\n      axios.delete('http://localhost:4000/app/posts/delete', {\n        data: payload\n      }).then(Response => console.log(\"DONE?\")).catch(error => {\n        console.log(error);\n      });\n      this.setState({\n        posts: this.state.posts.filter(el => el._id != uId)\n      }); //window.location.href = '/show';\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        user: \"\",\n        loggedIn: false\n      });\n      localStorage.clear();\n      console.log(\"Bye bye\");\n    };\n  }\n\n  render() {\n    if (!this.state.loggedIn) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-5 col-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oops\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Please Login to view all your Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"link\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/signin\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                classname: \"link\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 66\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.edit === \"yes\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5 col-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog\",\n        children: /*#__PURE__*/_jsxDEV(CardGroup, {\n          children: this.displayData(this.state.posts)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PostShow;","map":{"version":3,"sources":["/Users/kushan/Desktop/send/signupfront/src/components/posts/show.js"],"names":["React","Component","axios","EditPost","Redirect","Route","Card","Button","CardImg","CardTitle","CardText","CardGroup","CardSubtitle","CardBody","Link","useParams","PostShow","constructor","props","state","fullName","username","email","password","posts","user","loggedIn","edit","componentDidMount","getData","log","localStorage","getItem","setState","console","usern","payload","post","then","Response","data","catch","alert","displayData","length","map","index","title","description","body","Editpost","DeletePost","id","_id","setItem","uId","delete","error","filter","el","handleLogout","clear","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport EditPost from './edit'\nimport { Redirect, Route } from 'react-router-dom';\nimport {\n    Card, Button, CardImg, CardTitle, CardText, CardGroup,\n    CardSubtitle, CardBody\n} from 'reactstrap';\nimport '../styles/show.css'\nimport { Link, useParams } from 'react-router-dom'\n\n\nclass PostShow extends Component {\n    constructor(props) {\n        super(props);\n    }\n    state = {\n        fullName: '',\n        username: '',\n        email: '',\n        password: '',\n        posts: [],\n        user: '',\n        loggedIn: '',\n        edit: ''\n    };\n\n    componentDidMount = () => {\n        this.getData()\n        const log = localStorage.getItem('user');\n        if (log) {\n            this.setState({\n                user: log,\n                loggedIn: true\n            })\n        }\n        console.log(this.state.loggedIn)\n        console.log(this.state.posts)\n\n    }\n    getData = () => {\n        const usern = localStorage.getItem('user')\n        const payload = {\n            username: usern\n        }\n\n        axios.post('http://localhost:4000/app/posts', payload)\n            .then((Response) => {\n                const data = Response.data\n                this.setState({ posts: data });\n\n\n                console.log(\"Data has been recieved\");\n\n            })\n            .catch(() => {\n                alert(\"No data sent\");\n            })\n    }\n    displayData = (posts) => {\n\n        if (!posts.length) return null;\n\n        return posts.map((posts, index) => (\n            <div className=\"container col-6 mt-5\">\n\n                <Card className=\"bg-dark text-white\">\n\n                    <CardBody>\n                        <CardTitle tag=\"h5\"><span className=\"show\">{posts.title}</span></CardTitle>\n                        <CardSubtitle tag=\"h6\" className=\"mb-2 text-muted\">{posts.description}</CardSubtitle>\n                        <CardText>{posts.body}</CardText>\n                        <Button outline color=\"warning\" onClick={() => this.Editpost(posts)}>Edit Post</Button>\n                        <Button outline color=\"danger\" onClick={() => this.DeletePost(posts)}>Delete</Button>\n                    </CardBody>\n                </Card>\n\n            </div>\n\n        ));\n    };\n    Editpost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"helllo\");\n        let id = data._id\n        console.log(\"id is->\" + id);\n        localStorage.setItem('id', id)\n        this.setState({\n            edit: \"yes\"\n\n        })\n        //console.log(data)\n        console.log(this.state.edit)\n\n    }\n    DeletePost = (data) => {\n        // console.log(this.posts.title)\n        console.log(\"deleting LETSGOO\");\n\n\n        let uId = data._id\n        const payload = {\n            id: uId\n\n        };\n        console.log(payload)\n\n\n        axios.delete('http://localhost:4000/app/posts/delete', { data: payload })\n            .then(Response => console.log(\"DONE?\"))\n            .catch((error) => {\n                console.log(error)\n            })\n        this.setState({\n            posts: this.state.posts.filter(el => el._id != uId)\n        })\n\n        //window.location.href = '/show';\n\n\n\n\n    }\n    handleLogout = () => {\n        this.setState({\n            user: \"\",\n            loggedIn: false\n        })\n        localStorage.clear()\n        console.log(\"Bye bye\")\n    }\n\n\n\n    render() {\n        if (!this.state.loggedIn) {\n            return (\n                <div className=\"container mt-5 col-6\">\n                    <div className=\"oops\">\n                        <h1>Please Login to view all your Posts</h1>\n                        <div className=\"link\"><Link to='/signin'><span classname=\"link\">Login</span></Link></div>\n                    </div>\n                </div>\n            )\n        }\n        if (this.state.edit === \"yes\") {\n            return (\n                <Redirect to='/edit'></Redirect>\n            )\n        }\n\n        return (\n            <div className=\"container mt-5 col-6\">\n\n\n\n\n                <div className=\"blog\">\n\n                    <CardGroup>\n                        {this.displayData(this.state.posts)}\n                    </CardGroup>\n\n                </div>\n                <button onClick={this.handleLogout}>Logout</button>\n\n\n            </div>\n        )\n\n    }\n}\n\nexport default PostShow"]},"metadata":{},"sourceType":"module"}